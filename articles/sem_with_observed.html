<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="semptools">
<title>Using set_sem_layout() for a Model With Observed Exogenous Variables â€¢ semptools</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Cabin-0.4.7/font.css" rel="stylesheet">
<link href="../deps/Cousine-0.4.7/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using set_sem_layout() for a Model With Observed Exogenous Variables">
<meta property="og:description" content="semptools">
<meta property="og:image" content="https://sfcheung.github.io/semptools/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><meta name="google-site-verification" content="0VLBmFnW_UJFI-7gXnORPBsWxqZwmzuGpK-TeVRLBjQ">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">semptools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.9.25</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/semptools.html">Get started</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>&lt;Quick Starts&gt;</h6>
    <a class="dropdown-item" href="../articles/semptools.html">Main functions</a>
    <a class="dropdown-item" href="../articles/quick_start_cfa.html">Setting the layout of a CFA model</a>
    <a class="dropdown-item" href="../articles/quick_start_sem.html">Setting the layout of a SEM model</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>&lt;Helpers&gt;</h6>
    <a class="dropdown-item" href="../articles/keep_or_drop_nodes.html">Keep or drop variables</a>
    <a class="dropdown-item" href="../articles/layout_matrix.html">Layout matrices</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>&lt;Special Cases&gt;</h6>
    <a class="dropdown-item" href="../articles/second_order.html">Second-order factors</a>
    <a class="dropdown-item" href="../articles/sem_with_observed.html">Observed exogenous variables</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/sfcheung/semptools/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Using set_sem_layout() for a Model With Observed Exogenous Variables</h1>
                        <h4 data-toc-skip class="author">Shu Fai Cheung
&amp; Mark Hok Chio Lai</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/sfcheung/semptools/blob/HEAD/vignettes/articles/sem_with_observed.Rmd" class="external-link"><code>vignettes/articles/sem_with_observed.Rmd</code></a></small>
      <div class="d-none name"><code>sem_with_observed.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="goal">Goal<a class="anchor" aria-label="anchor" href="#goal"></a>
</h2>
<p>This article illustrates how to use <code><a href="../reference/set_sem_layout.html">set_sem_layout()</a></code>
from the package <a href="https://cran.r-project.org/package=semptools" class="external-link">semptools</a> for a
model with latent variables and one or more observed exogenous variables
(a.k.a., predictors or independent variables in some disciplines), and
the observed exogenous variables to be placed like other latent
variables in a model diagram.</p>
<p>This article assumes basic knowledge in using <code>semptools</code>
and <code><a href="../reference/set_sem_layout.html">set_sem_layout()</a></code> (see
<code><a href="../articles/semptools.html">vignette("semptools")</a></code> and
<code><a href="../articles/quick_start_sem.html">vignette("quick_start_sem")</a></code> for illustrations).</p>
</div>
<div class="section level2">
<h2 id="model-and-data">Model and Data<a class="anchor" aria-label="anchor" href="#model-and-data"></a>
</h2>
<p>The following model is to be fitted to the dataset
<code>sem_example</code>, provided in the package
<code>semptools</code>. It is fitted by <code><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">lavaan::sem()</a></code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sfcheung.github.io/semptools/">semptools</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lavaan.ugent.be" class="external-link">lavaan</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; This is lavaan 0.6-16</span></span>
<span><span class="co">#&gt; lavaan is FREE software! Please report any bugs.</span></span>
<span><span class="va">mod</span> <span class="op">&lt;-</span></span>
<span>  <span class="st">'f1 =~ x01 + x02 + x03</span></span>
<span><span class="st">   f3 =~ x08 + x09 + x10</span></span>
<span><span class="st">   f4 =~ x11 + x12 + x13 + x14</span></span>
<span><span class="st">   f3 ~ f1 + x04</span></span>
<span><span class="st">   f4 ~ f3 + x05'</span></span>
<span><span class="va">fit_sem</span> <span class="op">&lt;-</span> <span class="fu">lavaan</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">sem</a></span><span class="op">(</span><span class="va">mod</span>, <span class="va">sem_example</span><span class="op">)</span></span></code></pre></div>
<p>In this model, <code>x04</code> and <code>x05</code> are exogenous
observed variables. They affect <code>f3</code> and <code>f4</code> but
they themselves are not indicators of latent factors.</p>
</div>
<div class="section level2">
<h2 id="setting-indicator_order-and-indicator_factor">Setting <code>indicator_order</code> and
<code>indicator_factor</code><a class="anchor" aria-label="anchor" href="#setting-indicator_order-and-indicator_factor"></a>
</h2>
<p>For a model in which all observed variables are indicators of latent
factors, they are placed in the vector for
<code>indicator_order</code>.</p>
<p>If an observed variable is not an indicator, then this is how to
include it in the call to <code><a href="../reference/set_sem_layout.html">set_sem_layout()</a></code>:</p>
<ul>
<li><p>It should be placed in <code>indicator_order</code> and
<code>indicator_factor</code> as if it were a latent factor and it were
its own indicator.</p></li>
<li><p>In the matrix for <code>factor_layout</code>, set its position as
if it were a latent factor.</p></li>
<li><p>No need to specify the position of its indicators in the matrix
for <code>factor_point_to</code>. Just leave the cell
<code>NA</code>.</p></li>
</ul>
<p>We generate the basic diagram by <code><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html" class="external-link">semPlot::semPaths()</a></code>
first:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/SachaEpskamp/semPlot" class="external-link">semPlot</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sfcheung.github.io/semptools/">semptools</a></span><span class="op">)</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html" class="external-link">semPaths</a></span><span class="op">(</span><span class="va">fit_sem</span>,</span>
<span>              whatLabels <span class="op">=</span> <span class="st">"est"</span>,</span>
<span>              sizeMan <span class="op">=</span> <span class="fl">5</span>,</span>
<span>              nCharNodes <span class="op">=</span> <span class="fl">0</span>,</span>
<span>              nCharEdges <span class="op">=</span> <span class="fl">0</span>,</span>
<span>              edge.width <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>              node.width <span class="op">=</span> <span class="fl">0.7</span>,</span>
<span>              edge.label.cex <span class="op">=</span> <span class="fl">0.6</span>,</span>
<span>              style <span class="op">=</span> <span class="st">"ram"</span>,</span>
<span>              mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">10</span>, <span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>              DoNotPlot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>These are the vectors for <code>indicator_order</code> and
<code>indicator_factor</code>. Note that <code>x04</code> and
<code>x05</code> appear on both vectors.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">indicator_order</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x04"</span>, <span class="st">"x05"</span>, <span class="st">"x01"</span>, <span class="st">"x02"</span>, <span class="st">"x03"</span>,</span>
<span>                      <span class="st">"x11"</span>, <span class="st">"x12"</span>, <span class="st">"x13"</span>, <span class="st">"x14"</span>, <span class="st">"x08"</span>, <span class="st">"x09"</span>, <span class="st">"x10"</span><span class="op">)</span></span>
<span><span class="va">indicator_factor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x04"</span>, <span class="st">"x05"</span>, <span class="st">"f1"</span>,  <span class="st">"f1"</span>,  <span class="st">"f1"</span>,</span>
<span>                      <span class="st">"f4"</span>,  <span class="st">"f4"</span>,  <span class="st">"f4"</span>,  <span class="st">"f4"</span>,  <span class="st">"f3"</span>,  <span class="st">"f3"</span>,  <span class="st">"f3"</span><span class="op">)</span></span></code></pre></div>
<p>This is the matrix for <code>factor_layout</code>, created by
<code><a href="../reference/layout_matrix.html">layout_matrix()</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">factor_layout</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/layout_matrix.html">layout_matrix</a></span><span class="op">(</span>f1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>                               f3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>                               f4 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>                               x04 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>                               x05 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">factor_layout</span></span>
<span><span class="co">#&gt;      [,1]  [,2]  [,3]</span></span>
<span><span class="co">#&gt; [1,] "f1"  "f3"  "f4"</span></span>
<span><span class="co">#&gt; [2,] "x04" "x05" NA</span></span></code></pre></div>
<p>This is the matrix for <code>factor_point_to</code>, created by
<code><a href="../reference/auto_factor_point_to.html">auto_factor_point_to()</a></code> (added in <code>semptools</code>
0.2.9.15) [^If not available, the matrix can be created manually by
<code><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix()</a></code>.]</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">factor_point_to</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/auto_factor_point_to.html">auto_factor_point_to</a></span><span class="op">(</span><span class="va">factor_layout</span>,</span>
<span>                                        f1 <span class="op">=</span> <span class="st">"up"</span>,</span>
<span>                                        f3 <span class="op">=</span> <span class="st">"up"</span>,</span>
<span>                                        f4 <span class="op">=</span> <span class="st">"up"</span><span class="op">)</span></span>
<span><span class="va">factor_point_to</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span><span class="co">#&gt; [1,] "up" "up" "up"</span></span>
<span><span class="co">#&gt; [2,] NA   NA   NA</span></span></code></pre></div>
<p>Last, we created more vectors to further modify the diagram:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">indicator_spread</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>f4 <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_sem_layout.html">set_sem_layout</a></span><span class="op">(</span><span class="va">p</span>,</span>
<span>                     indicator_order <span class="op">=</span> <span class="va">indicator_order</span>,</span>
<span>                     indicator_factor <span class="op">=</span> <span class="va">indicator_factor</span>,</span>
<span>                     factor_layout <span class="op">=</span> <span class="va">factor_layout</span>,</span>
<span>                     factor_point_to <span class="op">=</span> <span class="va">factor_point_to</span>,</span>
<span>                     indicator_spread <span class="op">=</span> <span class="va">indicator_spread</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">p2</span><span class="op">)</span></span></code></pre></div>
<p><img src="sem_with_observed_files/figure-html/unnamed-chunk-8-1.png" width="768" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="final-remarks">Final Remarks<a class="anchor" aria-label="anchor" href="#final-remarks"></a>
</h2>
<p>For further information on using <code><a href="../reference/set_sem_layout.html">set_sem_layout()</a></code>,
please refer to <code><a href="../articles/quick_start_sem.html">vignette("quick_start_sem")</a></code>. For
illustrations on how to modify a path diagram from
<code><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html" class="external-link">semPlot::semPaths()</a></code> using functions in
<code>semptools</code>, please refer to
<code><a href="../articles/semptools.html">vignette("semptools")</a></code>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Shu Fai Cheung, Mark Hok Chio Lai.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
