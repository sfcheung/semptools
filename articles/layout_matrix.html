<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Layout Matrices • semptools</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Cabin-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Cousine-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Layout Matrices">
<meta name="google-site-verification" content="0VLBmFnW_UJFI-7gXnORPBsWxqZwmzuGpK-TeVRLBjQ">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">semptools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/semptools.html">Get started</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><h6 class="dropdown-header" data-toc-skip>&lt;Quick Starts&gt;</h6></li>
    <li><a class="dropdown-item" href="../articles/semptools.html">Main functions</a></li>
    <li><a class="dropdown-item" href="../articles/quick_start_cfa.html">Setting the layout of a CFA model</a></li>
    <li><a class="dropdown-item" href="../articles/quick_start_sem.html">Setting the layout of a SEM model</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>&lt;Helpers&gt;</h6></li>
    <li><a class="dropdown-item" href="../articles/keep_or_drop_nodes.html">Keep or drop variables</a></li>
    <li><a class="dropdown-item" href="../articles/layout_matrix.html">Layout matrices</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>&lt;Special Cases&gt;</h6></li>
    <li><a class="dropdown-item" href="../articles/second_order.html">Second-order factors</a></li>
    <li><a class="dropdown-item" href="../articles/sem_with_observed.html">Observed exogenous variables</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sfcheung/semptools/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Layout Matrices</h1>
                        <h4 data-toc-skip class="author">Shu Fai Cheung
&amp; Mark Hok Chio Lai</h4>
            
            <h4 data-toc-skip class="date">2025-06-29</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/sfcheung/semptools/blob/master/vignettes/layout_matrix.Rmd" class="external-link"><code>vignettes/layout_matrix.Rmd</code></a></small>
      <div class="d-none name"><code>layout_matrix.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>One useful feature of <code><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html" class="external-link">semPlot::semPaths()</a></code> from the
package <a href="https://sfcheung.github.io/semptools/">semptools</a>
(<a href="https://cran.r-project.org/package=semptools" class="external-link">CRAN page</a>)
is using setting the argument <code>layout</code> to a layout matrix to
specify the location of each node in a structural equation model. This
guide briefly explains how to use <code>layout</code>, and then
introduces the helper function <code><a href="../reference/layout_matrix.html">layout_matrix()</a></code> of
<code>semptools</code> that can be used to construct a layout matrix.
Last, it describes how <code>factor_layout</code> is used in
<code><a href="../reference/set_sem_layout.html">set_sem_layout()</a></code> to specify the layout of the latent
factors only, and let <code><a href="../reference/set_sem_layout.html">set_sem_layout()</a></code> decide the positions
of their indicators.</p>
</div>
<div class="section level2">
<h2 id="what-layout-does-in-semplotsempaths-">What <code>layout</code> Does in
<code>semPlot::semPaths</code>.<a class="anchor" aria-label="anchor" href="#what-layout-does-in-semplotsempaths-"></a>
</h2>
<p>Suppose we have a path model with four variables, <code>x1</code>,
<code>x2</code>, <code>x3</code>, and <code>x4</code>. <code>x1</code>
and <code>x2</code> affects <code>x3</code>, and <code>x1</code> and
<code>x3</code> affects <code>x4</code>. In psychology, this model is
usually presented this way:</p>
<p><img src="layout_matrix_files/figure-html/conceptual_diagram-1.png" width="576" style="display: block; margin: auto;"></p>
<p>If we fit the model by <code><a href="https://rdrr.io/pkg/lavaan/man/lavaan.html" class="external-link">lavaan::lavaan()</a></code> and use
<code><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html" class="external-link">semPlot::semPaths()</a></code> to generate the plot without using
<code>layout</code>, this is the resulting plot:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lavaan.ugent.be" class="external-link">lavaan</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/SachaEpskamp/semPlot" class="external-link">semPlot</a></span><span class="op">)</span></span>
<span><span class="va">mod_pa</span> <span class="op">&lt;-</span></span>
<span> <span class="st">'x1 ~~ x2</span></span>
<span><span class="st">  x3 ~  x1 + x2</span></span>
<span><span class="st">  x4 ~  x1 + x3</span></span>
<span><span class="st"> '</span></span>
<span><span class="va">fit_pa</span> <span class="op">&lt;-</span> <span class="fu">lavaan</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">sem</a></span><span class="op">(</span><span class="va">mod_pa</span>, <span class="va">pa_example</span><span class="op">)</span></span>
<span><span class="va">p_pa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html" class="external-link">semPaths</a></span><span class="op">(</span><span class="va">fit_pa</span>, whatLabels <span class="op">=</span> <span class="st">"est"</span>,</span>
<span>           sizeMan <span class="op">=</span> <span class="fl">10</span>,</span>
<span>           edge.label.cex <span class="op">=</span> <span class="fl">1.15</span>,</span>
<span>           style <span class="op">=</span> <span class="st">"ram"</span>,</span>
<span>           nCharNodes <span class="op">=</span> <span class="fl">0</span>, nCharEdges <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<p><img src="layout_matrix_files/figure-html/wo_layout-1.png" width="576" style="display: block; margin: auto;"></p>
<p>This layout is different from the convention used in psychology.</p>
<p>To use <code>layout</code>, we first decide the grid to be used to
position the variable (nodes). For example, for the conceptual diagram,
we can try a 3 by 4 grid</p>
<p><img src="layout_matrix_files/figure-html/grid-1.png" width="576" style="display: block; margin: auto;"></p>
<p>The pair of numbers in each cell denote the location of the cell in a
3 by 4 matrix as indexed in an R matrix. An empty column was added
between <code>x3</code> and <code>x4</code> because we want to move
<code>x4</code> further away to the right.</p>
<p>We then create a matrix of the same dimension as the grid, and
initialize the cells by <code>NA</code>, which denoted a cell with
<em>nothing</em>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">m</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></span>
<span><span class="co">#&gt; [1,]   NA   NA   NA   NA</span></span>
<span><span class="co">#&gt; [2,]   NA   NA   NA   NA</span></span>
<span><span class="co">#&gt; [3,]   NA   NA   NA   NA</span></span></code></pre></div>
<p>We then set the position of each variable (node, as called internally
in a plot by <code><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html" class="external-link">semPlot::semPaths()</a></code>) by setting the
corresponding cell to the name of this variable as appeared in the
<code>lavaan</code> model.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"x1"</span></span>
<span><span class="va">m</span><span class="op">[</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"x2"</span></span>
<span><span class="va">m</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"x3"</span></span>
<span><span class="va">m</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"x4"</span></span>
<span><span class="va">m</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></span>
<span><span class="co">#&gt; [1,] "x1" NA   NA   NA  </span></span>
<span><span class="co">#&gt; [2,] NA   "x3" NA   "x4"</span></span>
<span><span class="co">#&gt; [3,] "x2" NA   NA   NA</span></span></code></pre></div>
<p>We can then set <code>layout</code> to this matrix to tell
<code><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html" class="external-link">semPlot::semPaths()</a></code> how to position the four variables:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p_pa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html" class="external-link">semPaths</a></span><span class="op">(</span><span class="va">fit_pa</span>, whatLabels <span class="op">=</span> <span class="st">"est"</span>,</span>
<span>           sizeMan <span class="op">=</span> <span class="fl">10</span>,</span>
<span>           edge.label.cex <span class="op">=</span> <span class="fl">1.15</span>,</span>
<span>           style <span class="op">=</span> <span class="st">"ram"</span>,</span>
<span>           nCharNodes <span class="op">=</span> <span class="fl">0</span>, nCharEdges <span class="op">=</span> <span class="fl">0</span>,</span>
<span>           layout <span class="op">=</span> <span class="va">m</span><span class="op">)</span></span></code></pre></div>
<p><img src="layout_matrix_files/figure-html/unnamed-chunk-4-1.png" width="576" style="display: block; margin: auto;"></p>
<p>Alternatively, we can type the matrix as it would appear if printed,
and set <code>byrow = TRUE</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x1"</span>,   <span class="cn">NA</span>,  <span class="cn">NA</span>,   <span class="cn">NA</span>,</span>
<span>                <span class="cn">NA</span>, <span class="st">"x3"</span>,  <span class="cn">NA</span>, <span class="st">"x4"</span>,</span>
<span>              <span class="st">"x2"</span>,   <span class="cn">NA</span>,  <span class="cn">NA</span>,   <span class="cn">NA</span><span class="op">)</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">m</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></span>
<span><span class="co">#&gt; [1,] "x1" NA   NA   NA  </span></span>
<span><span class="co">#&gt; [2,] NA   "x3" NA   "x4"</span></span>
<span><span class="co">#&gt; [3,] "x2" NA   NA   NA</span></span></code></pre></div>
<p>We need to type more because we need to include <code>NA</code> for
all the empty cells. However, this approach let us see immediately how
the variables will be positioned. We just place the variables in the
target cell, without knowing the coordinates. This is a WYSIWYG
(what-you-see-is-what-you-get) approach. This is the approach used in
the Quick Start Guides.</p>
</div>
<div class="section level2">
<h2 id="layout_matrix-in-semptools">
<code>layout_matrix()</code> in <code>semptools</code><a class="anchor" aria-label="anchor" href="#layout_matrix-in-semptools"></a>
</h2>
<p>The WYSIWYG approach in the previous section has one drawback: It is
not easy to change the position of the variables and the dimension of
the grid. In real research, trial-and-error is usually needed to find a
desirable layout. For example, if we want to add a column or row, we
need ty type several <code>NA</code>s to crate it.</p>
<p>The <code><a href="../reference/layout_matrix.html">layout_matrix()</a></code> function in <code>semptools</code>
is designed to generate the matrix using the coordinates of the
variables. Instead of specifying the dimension ourselves,
<code><a href="../reference/layout_matrix.html">layout_matrix()</a></code> will try to figure out the dimension based
on the coordinates automatically.</p>
<p>For example, to generate the same layout above, we can do this:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/layout_matrix.html">layout_matrix</a></span><span class="op">(</span>x1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>                    x2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>                    x3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>                    x4 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">m2</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3] [,4]</span></span>
<span><span class="co">#&gt; [1,] "x1" NA   NA   NA  </span></span>
<span><span class="co">#&gt; [2,] NA   "x3" NA   "x4"</span></span>
<span><span class="co">#&gt; [3,] "x2" NA   NA   NA</span></span>
<span><span class="va">p_pa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html" class="external-link">semPaths</a></span><span class="op">(</span><span class="va">fit_pa</span>, whatLabels <span class="op">=</span> <span class="st">"est"</span>,</span>
<span>           sizeMan <span class="op">=</span> <span class="fl">10</span>,</span>
<span>           edge.label.cex <span class="op">=</span> <span class="fl">1.15</span>,</span>
<span>           style <span class="op">=</span> <span class="st">"ram"</span>,</span>
<span>           nCharNodes <span class="op">=</span> <span class="fl">0</span>, nCharEdges <span class="op">=</span> <span class="fl">0</span>,</span>
<span>           layout <span class="op">=</span> <span class="va">m2</span><span class="op">)</span></span></code></pre></div>
<p><img src="layout_matrix_files/figure-html/unnamed-chunk-6-1.png" width="576" style="display: block; margin: auto;"></p>
<p>Suppose we want to move <code>x4</code> closer to <code>x3</code>.
Instead of deleting the 3rd columns of <code>NA</code>, we can just
change the coordinates of <code>x4</code> in
<code><a href="../reference/layout_matrix.html">layout_matrix()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/layout_matrix.html">layout_matrix</a></span><span class="op">(</span>x1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>                    x2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>                    x3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>                    x4 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">m3</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span><span class="co">#&gt; [1,] "x1" NA   NA  </span></span>
<span><span class="co">#&gt; [2,] NA   "x3" "x4"</span></span>
<span><span class="co">#&gt; [3,] "x2" NA   NA</span></span>
<span><span class="va">p_pa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html" class="external-link">semPaths</a></span><span class="op">(</span><span class="va">fit_pa</span>, whatLabels <span class="op">=</span> <span class="st">"est"</span>,</span>
<span>           sizeMan <span class="op">=</span> <span class="fl">10</span>,</span>
<span>           edge.label.cex <span class="op">=</span> <span class="fl">1.15</span>,</span>
<span>           style <span class="op">=</span> <span class="st">"ram"</span>,</span>
<span>           nCharNodes <span class="op">=</span> <span class="fl">0</span>, nCharEdges <span class="op">=</span> <span class="fl">0</span>,</span>
<span>           layout <span class="op">=</span> <span class="va">m3</span><span class="op">)</span></span></code></pre></div>
<p><img src="layout_matrix_files/figure-html/unnamed-chunk-7-1.png" width="576" style="display: block; margin: auto;"></p>
<p>The best approach to specify the layout depends on the situation at
hand. During the trial-and-error phrase, using
<code><a href="../reference/layout_matrix.html">layout_matrix()</a></code> is good for changing the layout. When the
layout has been finalized, for readability, typing the matrix row-by-row
may be better (although we can still use <code><a href="../reference/layout_matrix.html">layout_matrix()</a></code> to
form the matrix and then print the matrix, as we did above).</p>
</div>
<div class="section level2">
<h2 id="factor_layout-in-set_sem_layout">
<code>factor_layout</code> in <code>set_sem_layout()</code><a class="anchor" aria-label="anchor" href="#factor_layout-in-set_sem_layout"></a>
</h2>
<p>If we use <code>layout</code> in <code><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html" class="external-link">semPlot::semPaths()</a></code> for
a structural models with latent factors and we want to draw both the
factors and their indicators, we need to specify the positions of
<em>all</em> nodes, that is, all the indicators and all the factors. The
grid will be very large and it is difficult to determine the positions
of the indicators.</p>
<p>The <code>factor_layout</code> argument in
<code><a href="../reference/set_sem_layout.html">set_sem_layout()</a></code> is developed to solve this problem. It
works like <code>layout</code> in <code><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html" class="external-link">semPlot::semPaths()</a></code>. In
<code><a href="../reference/set_sem_layout.html">set_sem_layout()</a></code>, we only need to specify the positions of
the latent factors. As in <code>layout</code>, we create a matrix to
specify the positions of the factors. The procedure is identical to what
illustrated above for a path model, and all the approaches presented
above can be used. The only difference is, only the names of the
<em>latent</em> <em>factors</em> need to be present in the matrix, and
the size of the grid only need to consider the factors.</p>
<p>For example, suppose we have 14 indicators and four factors, and this
is the model:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod</span> <span class="op">&lt;-</span></span>
<span>  <span class="st">'f1 =~ x01 + x02 + x03</span></span>
<span><span class="st">   f2 =~ x04 + x05 + x06 + x07</span></span>
<span><span class="st">   f3 =~ x08 + x09 + x10</span></span>
<span><span class="st">   f4 =~ x11 + x12 + x13 + x14</span></span>
<span><span class="st">   f3 ~  f1 + f2</span></span>
<span><span class="st">   f4 ~  f1 + f3</span></span>
<span><span class="st">  '</span></span></code></pre></div>
<p>If we want to draw both the factors and the indicators, the plot will
have 18 nodes:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">lavaan</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/sem.html" class="external-link">sem</a></span><span class="op">(</span><span class="va">mod</span>, <span class="va">cfa_example</span><span class="op">)</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html" class="external-link">semPaths</a></span><span class="op">(</span><span class="va">fit</span>, whatLabels<span class="op">=</span><span class="st">"est"</span>,</span>
<span>        sizeMan <span class="op">=</span> <span class="fl">5</span>,</span>
<span>        node.width <span class="op">=</span> <span class="fl">1</span>,</span>
<span>        edge.label.cex <span class="op">=</span> <span class="fl">.75</span>,</span>
<span>        style <span class="op">=</span> <span class="st">"ram"</span>,</span>
<span>        mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="layout_matrix_files/figure-html/unnamed-chunk-9-1.png" width="576" style="display: block; margin: auto;"></p>
<p>Suppose we want to position the factors this way:</p>
<p><img src="layout_matrix_files/figure-html/unnamed-chunk-10-1.png" width="576" style="display: block; margin: auto;"></p>
<p>Again, we decide the grid to use, which is 3 by 3 in this
example:</p>
<p><img src="layout_matrix_files/figure-html/unnamed-chunk-11-1.png" width="576" style="display: block; margin: auto;"></p>
<p>Therefore, this is the matrix to be used:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m_sem</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/layout_matrix.html">layout_matrix</a></span><span class="op">(</span>f1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>                    f2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>                    f3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>                    f4 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">m_sem</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span><span class="co">#&gt; [1,] "f1" NA   NA  </span></span>
<span><span class="co">#&gt; [2,] NA   "f3" "f4"</span></span>
<span><span class="co">#&gt; [3,] "f2" NA   NA</span></span></code></pre></div>
<p>Note that <code><a href="../reference/layout_matrix.html">layout_matrix()</a></code> can also be used to set up the
orientation of the indicators of each factor:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">point_to</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/layout_matrix.html">layout_matrix</a></span><span class="op">(</span>left <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>                          left <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>                          down <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>                          up <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>We can then use this matrix in <code><a href="../reference/set_sem_layout.html">set_sem_layout()</a></code> (please
refer to <code><a href="../articles/quick_start_sem.html">vignette("quick_start_sem")</a></code> or
<code><a href="../reference/set_sem_layout.html">?set_sem_layout</a></code> on how to specify other arguments):</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">indicator_order</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x04"</span>, <span class="st">"x05"</span>, <span class="st">"x06"</span>, <span class="st">"x07"</span>,</span>
<span>                      <span class="st">"x01"</span>, <span class="st">"x02"</span>, <span class="st">"x03"</span>,</span>
<span>                      <span class="st">"x11"</span>, <span class="st">"x12"</span>, <span class="st">"x13"</span>, <span class="st">"x14"</span>,</span>
<span>                      <span class="st">"x08"</span>, <span class="st">"x09"</span>, <span class="st">"x10"</span><span class="op">)</span></span>
<span><span class="va">indicator_factor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"f2"</span>,  <span class="st">"f2"</span>,  <span class="st">"f2"</span>,  <span class="st">"f2"</span>,</span>
<span>                       <span class="st">"f1"</span>,  <span class="st">"f1"</span>,  <span class="st">"f1"</span>,</span>
<span>                       <span class="st">"f4"</span>,  <span class="st">"f4"</span>,  <span class="st">"f4"</span>,  <span class="st">"f4"</span>,</span>
<span>                       <span class="st">"f3"</span>,  <span class="st">"f3"</span>,  <span class="st">"f3"</span><span class="op">)</span></span>
<span><span class="va">indicator_push</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>f3 <span class="op">=</span> <span class="fl">2.5</span>,</span>
<span>                    f4 <span class="op">=</span> <span class="fl">2.5</span>,</span>
<span>                    f1 <span class="op">=</span> <span class="fl">1.5</span>,</span>
<span>                    f2 <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span>
<span><span class="va">indicator_spread</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>f1 <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                      f2 <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                      f3 <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                      f4 <span class="op">=</span> <span class="fl">1.75</span><span class="op">)</span></span>
<span><span class="va">loading_position</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>f2 <span class="op">=</span> <span class="fl">.6</span>,</span>
<span>                      f3 <span class="op">=</span> <span class="fl">.8</span>,</span>
<span>                      f4 <span class="op">=</span> <span class="fl">.8</span><span class="op">)</span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_sem_layout.html">set_sem_layout</a></span><span class="op">(</span><span class="va">p</span>,</span>
<span>                     indicator_order <span class="op">=</span> <span class="va">indicator_order</span>,</span>
<span>                     indicator_factor <span class="op">=</span> <span class="va">indicator_factor</span>,</span>
<span>                     factor_layout <span class="op">=</span> <span class="va">m_sem</span>,</span>
<span>                     factor_point_to <span class="op">=</span> <span class="va">point_to</span>,</span>
<span>                     indicator_push <span class="op">=</span> <span class="va">indicator_push</span>,</span>
<span>                     indicator_spread <span class="op">=</span> <span class="va">indicator_spread</span>,</span>
<span>                     loading_position <span class="op">=</span> <span class="va">loading_position</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">p2</span><span class="op">)</span></span></code></pre></div>
<p><img src="layout_matrix_files/figure-html/unnamed-chunk-14-1.png" width="576" style="display: block; margin: auto;"></p>
<p>This make it much easier to specify the positions of factors in a
structural equation model with latent factors.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Shu Fai Cheung, Mark Hok Chio Lai.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
