<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Layout Matrices â€¢ semptools</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Layout Matrices">
<meta property="og:description" content="semptools">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">semptools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.9.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/semptools.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/keep_or_drop_nodes.html">Keep or Drop Selected Variables</a>
    </li>
    <li>
      <a href="../articles/layout_matrix.html">Layout Matrices</a>
    </li>
    <li>
      <a href="../articles/quick_start_cfa.html">Quick Start To set_cfa_layout</a>
    </li>
    <li>
      <a href="../articles/quick_start_sem.html">Quick Start To set_sem_layout</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/sfcheung/semptools/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="layout_matrix_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Layout Matrices</h1>
                        <h4 class="author">Shu Fai Cheung &amp; Mark Hok Chio Lai</h4>
            
            <h4 class="date">2021-10-06</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/sfcheung/semptools/blob/master/vignettes/layout_matrix.Rmd"><code>vignettes/layout_matrix.Rmd</code></a></small>
      <div class="hidden name"><code>layout_matrix.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>One useful feature of <code><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html">semPlot::semPaths()</a></code> is using setting the argument <code>layout</code> to a layout matrix to specify the location of each node in a structural equation model. This guide briefly explains how to use <code>layout</code>, and then introduces the helper function <code><a href="../reference/layout_matrix.html">layout_matrix()</a></code> of <code>semptools</code> that can be used to construct a layout matrix. Last, it describes how <code>factor_layout</code> is used in <code><a href="../reference/set_sem_layout.html">set_sem_layout()</a></code> to specify the layout of the latent factors only, and let <code><a href="../reference/set_sem_layout.html">set_sem_layout()</a></code><br>
decide the positions of their indicators.</p>
</div>
<div id="what-layout-does-in-semplotsempaths-" class="section level1">
<h1 class="hasAnchor">
<a href="#what-layout-does-in-semplotsempaths-" class="anchor"></a>What <code>layout</code> Does in <code>semPlot::semPaths</code>.</h1>
<p>Suppose we have a path model with four variables, <code>x1</code>, <code>x2</code>, <code>x3</code>, and <code>x4</code>. <code>x1</code> and <code>x2</code> affects <code>x3</code>, and <code>x1</code> and <code>x3</code> affects <code>x4</code>. In psychology, this model is usually presented this way:</p>
<p><img src="layout_matrix_files/figure-html/conceptual_diagram-1.png" width="576" style="display: block; margin: auto;"></p>
<p>If we fit the model by <code><a href="https://rdrr.io/pkg/lavaan/man/lavaan.html">lavaan::lavaan()</a></code> and use <code><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html">semPlot::semPaths()</a></code> to generate the plot without using <code>layout</code>, this is the resulting plot:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lavaan.ugent.be">lavaan</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/SachaEpskamp/semPlot">semPlot</a></span><span class="op">)</span>
<span class="va">mod_pa</span> <span class="op">&lt;-</span> 
 <span class="st">'x1 ~~ x2
  x3 ~  x1 + x2
  x4 ~  x1 + x3
 '</span>
<span class="va">fit_pa</span> <span class="op">&lt;-</span> <span class="fu">lavaan</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/sem.html">sem</a></span><span class="op">(</span><span class="va">mod_pa</span>, <span class="va">pa_example</span><span class="op">)</span>
<span class="va">p_pa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html">semPaths</a></span><span class="op">(</span><span class="va">fit_pa</span>, whatLabels <span class="op">=</span> <span class="st">"est"</span>,
           sizeMan <span class="op">=</span> <span class="fl">10</span>,
           edge.label.cex <span class="op">=</span> <span class="fl">1.15</span>,
           style <span class="op">=</span> <span class="st">"ram"</span>, 
           nCharNodes <span class="op">=</span> <span class="fl">0</span>, nCharEdges <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></code></pre></div>
<p><img src="layout_matrix_files/figure-html/wo_layout-1.png" width="576" style="display: block; margin: auto;"></p>
<p>This layout is different from the convention used in psychology.</p>
<p>To use <code>layout</code>, we first decide the grid to be used to position the variable (nodes). For example, for the conceptual diagram, we can try a 3 by 4 grid</p>
<p><img src="layout_matrix_files/figure-html/grid-1.png" width="576" style="display: block; margin: auto;"></p>
<p>The pair of numbers in each cell denote the location of the cell in a 3 by 4 matrix as indexed in an R matrix. An empty column was added between <code>x3</code> and <code>x4</code> because we want to move <code>x4</code> further away to the right.</p>
<p>We then create a matrix of the same dimension as the grid, and initialize the cells by <code>NA</code>, which denoted a cell with <em>nothing</em>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span>
<span class="va">m</span>
<span class="co">#&gt;      [,1] [,2] [,3] [,4]</span>
<span class="co">#&gt; [1,]   NA   NA   NA   NA</span>
<span class="co">#&gt; [2,]   NA   NA   NA   NA</span>
<span class="co">#&gt; [3,]   NA   NA   NA   NA</span></code></pre></div>
<p>We then set the position of each variable (node, as called internally in a plot by <code><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html">semPlot::semPaths()</a></code>) by setting the corresponding cell to the name of this variable as appeared in the <code>lavaan</code> model.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">m</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"x1"</span>
<span class="va">m</span><span class="op">[</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"x2"</span>
<span class="va">m</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"x3"</span>
<span class="va">m</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"x4"</span>
<span class="va">m</span>
<span class="co">#&gt;      [,1] [,2] [,3] [,4]</span>
<span class="co">#&gt; [1,] "x1" NA   NA   NA  </span>
<span class="co">#&gt; [2,] NA   "x3" NA   "x4"</span>
<span class="co">#&gt; [3,] "x2" NA   NA   NA</span></code></pre></div>
<p>We can then set <code>layout</code> to this matrix to tell <code><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html">semPlot::semPaths()</a></code> how to position the four variables:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p_pa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html">semPaths</a></span><span class="op">(</span><span class="va">fit_pa</span>, whatLabels <span class="op">=</span> <span class="st">"est"</span>,
           sizeMan <span class="op">=</span> <span class="fl">10</span>,
           edge.label.cex <span class="op">=</span> <span class="fl">1.15</span>,
           style <span class="op">=</span> <span class="st">"ram"</span>, 
           nCharNodes <span class="op">=</span> <span class="fl">0</span>, nCharEdges <span class="op">=</span> <span class="fl">0</span>,
           layout <span class="op">=</span> <span class="va">m</span><span class="op">)</span></code></pre></div>
<p><img src="layout_matrix_files/figure-html/unnamed-chunk-4-1.png" width="576" style="display: block; margin: auto;"></p>
<p>Alternatively, we can type the matrix as it would appear if printed, and set <code>byrow = TRUE</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x1"</span>,   <span class="cn">NA</span>,  <span class="cn">NA</span>,   <span class="cn">NA</span>,
                <span class="cn">NA</span>, <span class="st">"x3"</span>,  <span class="cn">NA</span>, <span class="st">"x4"</span>,
              <span class="st">"x2"</span>,   <span class="cn">NA</span>,  <span class="cn">NA</span>,   <span class="cn">NA</span><span class="op">)</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span>
<span class="va">m</span>
<span class="co">#&gt;      [,1] [,2] [,3] [,4]</span>
<span class="co">#&gt; [1,] "x1" NA   NA   NA  </span>
<span class="co">#&gt; [2,] NA   "x3" NA   "x4"</span>
<span class="co">#&gt; [3,] "x2" NA   NA   NA</span></code></pre></div>
<p>We need to type more because we need to include <code>NA</code> for all the empty cells. However, this approach let us see immediately how the variables will be positioned. We just place the variables in the target cell, without knowing the coordinates. This is a WYSIWYG (what-you-see-is-what-you-get) approach. This is the approach used in the Quick Start Guides.</p>
</div>
<div id="layout_matrix-in-semptools" class="section level1">
<h1 class="hasAnchor">
<a href="#layout_matrix-in-semptools" class="anchor"></a><code>layout_matrix()</code> in <code>semptools</code>
</h1>
<p>The WYSIWYG approach in the previous section has one drawback: It is not easy to change the position of the variables and the dimension of the grid. In real research, trial-and-error is usually needed to find a desirable layout. For example, if we want to add a column or row, we need ty type several <code>NA</code>s to crate it.</p>
<p>The <code><a href="../reference/layout_matrix.html">layout_matrix()</a></code> function in <code>semptools</code> is designed to generate the matrix using the coordinates of the variables. Instead of specifying the dimension ourselves, <code><a href="../reference/layout_matrix.html">layout_matrix()</a></code> will try to figure out the dimension based on the coordinates automatically.</p>
<p>For example, to generate the same layout above, we can do this:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">m2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/layout_matrix.html">layout_matrix</a></span><span class="op">(</span>x1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,
                    x2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>,
                    x3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>,
                    x4 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>
<span class="va">m2</span>
<span class="co">#&gt;      [,1] [,2] [,3] [,4]</span>
<span class="co">#&gt; [1,] "x1" NA   NA   NA  </span>
<span class="co">#&gt; [2,] NA   "x3" NA   "x4"</span>
<span class="co">#&gt; [3,] "x2" NA   NA   NA</span>
<span class="va">p_pa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html">semPaths</a></span><span class="op">(</span><span class="va">fit_pa</span>, whatLabels <span class="op">=</span> <span class="st">"est"</span>,
           sizeMan <span class="op">=</span> <span class="fl">10</span>,
           edge.label.cex <span class="op">=</span> <span class="fl">1.15</span>,
           style <span class="op">=</span> <span class="st">"ram"</span>, 
           nCharNodes <span class="op">=</span> <span class="fl">0</span>, nCharEdges <span class="op">=</span> <span class="fl">0</span>,
           layout <span class="op">=</span> <span class="va">m2</span><span class="op">)</span></code></pre></div>
<p><img src="layout_matrix_files/figure-html/unnamed-chunk-6-1.png" width="576" style="display: block; margin: auto;"></p>
<p>Suppose we want to move <code>x4</code> closer to <code>x3</code>. Instead of deleting the 3rd columns of <code>NA</code>, we can<br>
just change the coordinates of <code>x4</code> in <code><a href="../reference/layout_matrix.html">layout_matrix()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">m3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/layout_matrix.html">layout_matrix</a></span><span class="op">(</span>x1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,
                    x2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>,
                    x3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>,
                    x4 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="va">m3</span>
<span class="co">#&gt;      [,1] [,2] [,3]</span>
<span class="co">#&gt; [1,] "x1" NA   NA  </span>
<span class="co">#&gt; [2,] NA   "x3" "x4"</span>
<span class="co">#&gt; [3,] "x2" NA   NA</span>
<span class="va">p_pa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html">semPaths</a></span><span class="op">(</span><span class="va">fit_pa</span>, whatLabels <span class="op">=</span> <span class="st">"est"</span>,
           sizeMan <span class="op">=</span> <span class="fl">10</span>,
           edge.label.cex <span class="op">=</span> <span class="fl">1.15</span>,
           style <span class="op">=</span> <span class="st">"ram"</span>, 
           nCharNodes <span class="op">=</span> <span class="fl">0</span>, nCharEdges <span class="op">=</span> <span class="fl">0</span>,
           layout <span class="op">=</span> <span class="va">m3</span><span class="op">)</span></code></pre></div>
<p><img src="layout_matrix_files/figure-html/unnamed-chunk-7-1.png" width="576" style="display: block; margin: auto;"></p>
<p>The best approach to specify the layout depends on the situation at hand. During the trial-and-error phrase, using <code><a href="../reference/layout_matrix.html">layout_matrix()</a></code> is good for changing the layout. When the layout has been finalized, for readability, typing the matrix row-by-row may be better (although we can still use <code><a href="../reference/layout_matrix.html">layout_matrix()</a></code> to form the matrix and then print the matrix, as we did above).</p>
</div>
<div id="factor_layout-in-set_sem_layout" class="section level1">
<h1 class="hasAnchor">
<a href="#factor_layout-in-set_sem_layout" class="anchor"></a><code>factor_layout</code> in <code>set_sem_layout()</code>
</h1>
<p>If we use <code>layout</code> in <code><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html">semPlot::semPaths()</a></code> for a structural models with latent factors and we want to draw both the factors and their indicators, we need to specify the positions of <em>all</em> nodes, that is, all the indicators and all the factors. The grid will be very large and it is difficult to determine the positions of the indicators.</p>
<p>The <code>factor_layout</code> argument in <code><a href="../reference/set_sem_layout.html">set_sem_layout()</a></code> is developed to solve this problem. It works like <code>layout</code> in <code><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html">semPlot::semPaths()</a></code>. In <code><a href="../reference/set_sem_layout.html">set_sem_layout()</a></code>, we only need to specify the positions of the latent factors. As in <code>layout</code>, we create a matrix to specify the positions of the factors. The procedure is identical to what illustrated above for a path model, and all the approaches presented above can be used. The only difference is, only the names of the <em>latent</em> <em>factors</em> need to be present in the matrix, and the size of the grid only need to consider the factors.</p>
<p>For example, suppose we have 14 indicators and four factors, and this is the model:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mod</span> <span class="op">&lt;-</span> 
  <span class="st">'f1 =~ x01 + x02 + x03
   f2 =~ x04 + x05 + x06 + x07
   f3 =~ x08 + x09 + x10
   f4 =~ x11 + x12 + x13 + x14
   f3 ~  f1 + f2
   f4 ~  f1 + f3
  '</span></code></pre></div>
<p>If we want to draw both the factors and the indicators, the plot will have 18 nodes:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">lavaan</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/sem.html">sem</a></span><span class="op">(</span><span class="va">mod</span>, <span class="va">cfa_example</span><span class="op">)</span>
<span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/semPlot/man/semPaths.html">semPaths</a></span><span class="op">(</span><span class="va">fit</span>, whatLabels<span class="op">=</span><span class="st">"est"</span>,
        sizeMan <span class="op">=</span> <span class="fl">5</span>,
        node.width <span class="op">=</span> <span class="fl">1</span>,
        edge.label.cex <span class="op">=</span> <span class="fl">.75</span>,
        style <span class="op">=</span> <span class="st">"ram"</span>,
        mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="layout_matrix_files/figure-html/unnamed-chunk-9-1.png" width="576" style="display: block; margin: auto;"></p>
<p>Suppose we want to position the factors this way:</p>
<p><img src="layout_matrix_files/figure-html/unnamed-chunk-10-1.png" width="576" style="display: block; margin: auto;"></p>
<p>Again, we decide the grid to use, which is 3 by 3 in this example:</p>
<p><img src="layout_matrix_files/figure-html/unnamed-chunk-11-1.png" width="576" style="display: block; margin: auto;"></p>
<p>Therefore, this is the matrix to be used:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">m_sem</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/layout_matrix.html">layout_matrix</a></span><span class="op">(</span>f1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,
                    f2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>,
                    f3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>,
                    f4 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="va">m_sem</span>
<span class="co">#&gt;      [,1] [,2] [,3]</span>
<span class="co">#&gt; [1,] "f1" NA   NA  </span>
<span class="co">#&gt; [2,] NA   "f3" "f4"</span>
<span class="co">#&gt; [3,] "f2" NA   NA</span></code></pre></div>
<p>Note that <code><a href="../reference/layout_matrix.html">layout_matrix()</a></code> can also be used to set up the orientation of the indicators of each factor:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">point_to</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/layout_matrix.html">layout_matrix</a></span><span class="op">(</span>left <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,
                          left <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>,
                          down <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>,
                          up <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>We can then use this matrix in <code><a href="../reference/set_sem_layout.html">set_sem_layout()</a></code> (please refer to <code><a href="../articles/quick_start_sem.html">vignette("quick_start_sem")</a></code> or <code><a href="../reference/set_sem_layout.html">?set_sem_layout</a></code> on how to specify other arguments):</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">indicator_order</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x04"</span>, <span class="st">"x05"</span>, <span class="st">"x06"</span>, <span class="st">"x07"</span>, 
                      <span class="st">"x01"</span>, <span class="st">"x02"</span>, <span class="st">"x03"</span>, 
                      <span class="st">"x11"</span>, <span class="st">"x12"</span>, <span class="st">"x13"</span>, <span class="st">"x14"</span>,
                      <span class="st">"x08"</span>, <span class="st">"x09"</span>, <span class="st">"x10"</span><span class="op">)</span>
<span class="va">indicator_factor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span> <span class="st">"f2"</span>,  <span class="st">"f2"</span>,  <span class="st">"f2"</span>,  <span class="st">"f2"</span>,  
                       <span class="st">"f1"</span>,  <span class="st">"f1"</span>,  <span class="st">"f1"</span>,  
                       <span class="st">"f4"</span>,  <span class="st">"f4"</span>,  <span class="st">"f4"</span>,  <span class="st">"f4"</span>,  
                       <span class="st">"f3"</span>,  <span class="st">"f3"</span>,  <span class="st">"f3"</span><span class="op">)</span>
<span class="va">indicator_push</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>f3 <span class="op">=</span> <span class="fl">2.5</span>,
                    f4 <span class="op">=</span> <span class="fl">2.5</span>,
                    f1 <span class="op">=</span> <span class="fl">1.5</span>,
                    f2 <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span>
<span class="va">indicator_spread</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>f1 <span class="op">=</span> <span class="fl">2</span>,
                      f2 <span class="op">=</span> <span class="fl">2</span>,
                      f3 <span class="op">=</span> <span class="fl">2</span>,
                      f4 <span class="op">=</span> <span class="fl">1.75</span><span class="op">)</span>
<span class="va">loading_position</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>f2 <span class="op">=</span> <span class="fl">.6</span>,
                      f3 <span class="op">=</span> <span class="fl">.8</span>,
                      f4 <span class="op">=</span> <span class="fl">.8</span><span class="op">)</span>
<span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_sem_layout.html">set_sem_layout</a></span><span class="op">(</span><span class="va">p</span>, 
                     indicator_order <span class="op">=</span> <span class="va">indicator_order</span>,
                     indicator_factor <span class="op">=</span> <span class="va">indicator_factor</span>,
                     factor_layout <span class="op">=</span> <span class="va">m_sem</span>,
                     factor_point_to <span class="op">=</span> <span class="va">point_to</span>,
                     indicator_push <span class="op">=</span> <span class="va">indicator_push</span>,
                     indicator_spread <span class="op">=</span> <span class="va">indicator_spread</span>,
                     loading_position <span class="op">=</span> <span class="va">loading_position</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">p2</span><span class="op">)</span></code></pre></div>
<p><img src="layout_matrix_files/figure-html/unnamed-chunk-14-1.png" width="576" style="display: block; margin: auto;"></p>
<p>This make it much easier to specify the positions of factors in a structural equation model with latent factors.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Shu Fai Cheung, Mark Hok Chio Lai.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
